(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),u=n.n(c),o=n(14),l=n(2),i=n(3),m=n.n(i),s="/api/persons",f=function(){return m.a.get(s).then((function(e){return e.data}))},d=function(e,t){return m.a.post(s,{name:e,number:t}).then((function(e){return e.data}))},b=function(e){return m.a.delete("".concat(s,"/").concat(e))},h=function(e,t){return m.a.put("".concat(s,"/").concat(e),t).then((function(e){return e.data}))},p=function(e){var t=e.searchName,n=e.setSearchName;return r.a.createElement("div",null,"Search for name: ",r.a.createElement("input",{value:t,onChange:function(e){return n(e.target.value)}}))},E=function(e){var t=e.newName,n=e.setNewName,a=e.newNumber,c=e.setNewNumber,u=e.addPerson,o=e.focusName;return r.a.createElement("form",{onSubmit:u},r.a.createElement("div",null,"Name: ",r.a.createElement("input",{value:t,onChange:function(e){return n(e.target.value)},required:!0,autoComplete:"off",ref:o})),r.a.createElement("div",null,"Number: ",r.a.createElement("input",{value:a,onChange:function(e){return c(e.target.value)},required:!0,autoComplete:"off"})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Add")))},N=function(e){var t=e.persons,n=e.searchName,a=e.deletePerson;return t.length?r.a.createElement("ul",{style:{listStyle:"none",padding:0}},t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return r.a.createElement("li",{key:e.name},e.name," ",e.number," \xa0",r.a.createElement("button",{onClick:function(){return a(e.id,e.name)}},"Delete"))}))):r.a.createElement("p",null,"Loading contacts...")},v=function(e){var t=e.message,n=e.type,c=e.setMessage,u=e.setType;return Object(a.useEffect)((function(){if(t){var e=setTimeout((function(){c(null),u("")}),5e3);return function(){return clearTimeout(e)}}}),[t]),t?r.a.createElement("div",{className:n},t):null},w=(n(37),function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(""),i=Object(l.a)(u,2),m=i[0],s=i[1],w=Object(a.useState)(""),j=Object(l.a)(w,2),O=j[0],g=j[1],y=Object(a.useState)(""),S=Object(l.a)(y,2),k=S[0],C=S[1],P=Object(a.useState)(null),D=Object(l.a)(P,2),T=D[0],A=D[1],L=Object(a.useState)(""),q=Object(l.a)(L,2),I=q[0],J=q[1],M=Object(a.useRef)();Object(a.useEffect)((function(){f().then(c)}),[]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(v,{message:T,type:I,setMessage:A,setType:J}),r.a.createElement(p,{searchName:k,setSearchName:C}),r.a.createElement("h3",null,"Add a new"),r.a.createElement(E,{newName:m,setNewName:s,newNumber:O,setNewNumber:g,addPerson:function(e){e.preventDefault();var t=n.find((function(e){return e.name===m}));t?window.confirm("".concat(m," is already added to phonebook, replace the old number with a new one?"))&&h(t.id,Object(o.a)({},t,{number:O})).then((function(e){c(n.map((function(t){return t.id===e.id?e:t}))),A("Updated ".concat(m,"'s number")),J("info"),s(""),g("")})).catch((function(){A("Information of ".concat(m," has already been deleted")),J("error"),c(n.filter((function(e){return e.id!==t.id})))})):d(m,O).then((function(e){c(n.concat(e)),A("Added ".concat(m)),J("info"),s(""),g("")})),M.current.focus()},focusName:M}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(N,{persons:n,searchName:k,deletePerson:function(e,t){window.confirm("Delete ".concat(t,"?"))&&b(e).then((function(){c(n.filter((function(t){return t.id!==e}))),A("Deleted ".concat(t)),J("info")}))}}))});u.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.6f21ba84.chunk.js.map